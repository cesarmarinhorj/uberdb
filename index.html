<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Uberdb by freekrai</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Uberdb</h1>
          <h2>A Lightweight Disk based JSON Database with a MongoDB like API for Node</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/freekrai/uberdb/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/freekrai/uberdb/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/freekrai/uberdb" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>
<a id="" class="anchor" href="#" aria-hidden="true"><span class="octicon octicon-link"></span></a><a href="http://badges.enytc.com/for/npm/uberdb"><img src="https://badge-me.herokuapp.com/api/npm/uberdb.png" alt="NPM version"></a>
</h1>

<p><a href="https://nodei.co/npm/uberdb/"><img src="https://nodei.co/npm/uberdb.png?downloads=true&amp;stars=true" alt="NPM"></a></p>

<p>A Lightweight Disk based JSON Database with a MongoDB like API for Node.</p>

<h2>
<a id="contents" class="anchor" href="#contents" aria-hidden="true"><span class="octicon octicon-link"></span></a><a name="contents" href="#contents"></a>Contents</h2>

<ul>
  <li><a href="#getting-started">Getting Started</a></li>
  <li><a href="#documentation">Documentation</a>
    <ul>
      <li><a href="#connect-to-db">Connect</a></li>
      <li><a href="#load-collections">Load Collections</a></li>
      <li><a href="#writesave-to-collection">Write/Save</a></li>
      <li><a href="#read-from-collection">Read</a></li>
      <li><a href="#update-collection">Update</a></li>
      <li><a href="#remove-collection">Remove</a></li>
      <li><a href="#count">Count</a></li>
    </ul>
  </li>
  <li><a href="#examples">Examples</a></li>
</ul>

<h2>
<a id="getting-started" class="anchor" href="#getting-started" aria-hidden="true"><span class="octicon octicon-link"></span></a>
<a name="getting-started" href="#getting-started"></a>Getting Started</h2>

<p>Install the module locally :  </p>

<div><pre>
  $ npm install uberdb
</pre></div>

<div><pre>
  var db = require('uberdb');
  db = db.connect('/path/to/db-folder', ['collection-name']);
  // you can access the traditional JSON DB methods here
</pre></div>

<h2><a id="documentation" class="anchor" href="#documentation" aria-hidden="true"><span class="octicon octicon-link"></span></a><a name="documentation" href="#documentation"></a>Documentation</h2>

<h3><a id="connect-to-db" class="anchor" href="#connect-to-db" aria-hidden="true"><span class="octicon octicon-link"></span></a><a name="connect-to-db" href="#connect-to-db"></a>Connect to DB</h3>

<div><pre>
  db.connect(pathToFolder, ['filename']);
</pre></div>

<p>Filename will be the name of the JSON file. You can omit the extension, uberDB will take care of it for you.</p>

<div><pre>
  var db = require('uberdb');
  db = db.connect('/examples/db', ['posts']);
  // or simply
  db.connect('/examples/db', ['posts']);
</pre></div>

<p>This will check for a directory at given path, if it does not exits, uberDB will throw an error and exit. </p>

<p>If the directory exists but the file/collection does not exist, uberDB will create it for you. </p>

<p><strong>Note</strong> : If you have manually created an empty JSON file, please make sure that it contains at least an empty array.</p>

<pre><code>
  []
</code></pre>

<p>Else it will throw an error like</p>

<pre><code>
  undefined:0
  ^
  SyntaxError: Unexpected end of input
</code></pre>

<h3>
<a id="load-collections" class="anchor" href="#load-collections" aria-hidden="true"><span class="octicon octicon-link"></span></a><a name="load-collections" href="#load-collections"></a>Load Collections</h3>

<p>Alternatively you can also load collections like </p>

<div><pre>
  var db = require('uberdb');
  // this
  db = db.connect('/examples/db');
  db.loadCollections(['posts']);
  //or
  db.connect('/examples/db');
  db.loadCollections(['posts']);
  //or
  db.connect('/examples/db').loadCollections(['posts']);
  //or
  db.connect('/examples/db', ['posts']);
</pre></div>

<h4><a id="load-multiple-collections" class="anchor" href="#load-multiple-collections" aria-hidden="true"><span class="octicon octicon-link"></span></a>
<a name="load-multiple-collections" href="#load-multiple-collections"></a>Load Multiple Collections</h4>

<div><pre>
  var db = require('uberdb');
  db.connect('/examples/db', ['posts','comments','users']);
</pre></div>

<h3>
<a id="writesave-to-collection" class="anchor" href="#writesave-to-collection" aria-hidden="true"><span class="octicon octicon-link"></span></a>
<a name="writesave-to-collection" href="#writesave-to-collection"></a>Write/Save to Collection</h3>

<div><pre>
  db.collectionName.save(object);
</pre></div>

<p>Once you have loaded a collection, you can access the collection's methods using the dot notation like</p>

<div><pre>
  db.[collectionName].[methodname]
</pre></div>

<p>To save the data, you can use</p>

<div><pre>
  var db = require('uberdb');
  db.connect('db', ['posts']);
  var post = {
    title : "Hello uberDB",
    published : "today",
    rating : "5 stars"
  }
  db.posts.save(post);
  // or
  db.posts.save([post]);
</pre></div>

<p>The saved data will be </p>

<div><pre>
  [
    {
        "title": "Hello uberDB",
        "published": "today",
        "rating": "5 stars",
        "_id": "0f6047c6c69149f0be0c8f5943be91be"
    }
  ]
</pre></div>

<p>You can also save multiple objects at once like</p>

<div><pre>
  var db = require('uberdb');
  db.connect('db', ['posts']);
  var post1 = {
    title : 'Hello uberDB',
    published : 'today',
    rating : '5 stars'
  }
  var post2 = {
    title : 'Hello uberDB',
    published : 'yesterday',
    rating : '5 stars'
  }
  var post3 = {
    title : 'Hello uberDB',
    published : 'today',
    rating : '4 stars'
  }
  db.posts.save([post1, post2, post3]);
</pre></div>

<p>And this will return the inserted objects</p>

<div><pre>
  [ { title: 'Hello uberDB',
    published: 'today',
    rating: '4 stars',
    _id: 'b1cdbb3525b84e8c822fc78896d0ca7b' },
  { title: 'Hello uberDB',
    published: 'yesterday',
    rating: '5 stars',
    _id: '42997c62e1714e9f9d88bf3b87901f3b' },
  { title: 'Hello uberDB',
    published: 'today',
    rating: '5 stars',
    _id: '4ca1c1597ddc4020bc41b4418e7a568e' } ]
</pre></div>

<h3>
<a id="read-from-collection" class="anchor" href="#read-from-collection" aria-hidden="true"><span class="octicon octicon-link"></span></a>
<a name="read-from-collection" href="#read-from-collection"></a>Read from Collection</h3>

<p>There are 2 methods available for reading the JSON collection</p>

<ul>
<li>db.collectionName.find(query)</li>
<li>db.collectionName.findOne(query)</li>
</ul>

<h4><a id="dbcollectionamefind" class="anchor" href="#dbcollectfind" aria-hidden="true"><span class="octicon octicon-link"></span></a>
<a name="dbcollectionamefind" href="#dbcollectfind"></a>db.collectioName.find()</h4>

<div><pre>
  var db = require('uberdb');
  db.connect('/examples/db', ['posts']);
  db.posts.find();
</pre></div>

<p>This will return all the records</p>

<div><pre>
  [{ 
    title: 'Hello uberDB',
    published: 'today',
    rating: '5 stars',
    _id: '0f6047c6c69149f0be0c8f5943be91be' 
  }]
</pre></div>

<p>You can also query with a criteria like</p>

<div><pre>
  var db = require('uberdb');
  db.connect('/examples/db', ['posts']);
  db.posts.find({rating : "5 stars"});
</pre></div>

<p>This will return all the posts which have a rating of 5.</p>

<p>Nested JSON : </p>

<div><pre>
  var postComments = {
    title: 'Hello uberDB',
    published: '2 days ago',
    comments: [{
        name: 'john doe',
        comment: 'this is cool',
        rating: 2
    }, {
        name: 'brian doe',
        comment: 'this is super',
        rating: 3
    }, {
        name: 'joe doe',
        comment: 'this is great',
        rating: 2
    }]
  }
</pre></div>

<div><pre>
  var savedPost = db.posts.save([postComments);
  foundPosts = db.posts.find({rating : 2});
</pre></div>

<p>Since uberDB is mostly for light weight data storage, avoid nested structures and huge datasets.</p>

<h4>
<a id="dbcollectionamefindonequery" class="anchor" href="#dbcollectionamefindonequery" aria-hidden="true"><span class="octicon octicon-link"></span></a>
<a name="dbcollectionamefindonequery" href="#dbcollectionamefindonequery"></a>db.collectioName.findOne(query)</h4>

<div><pre>
  var db = require('uberdb');
  db.connect('/examples/db', ['posts']);
  db.posts.findOne();
</pre></div>

<p>If you do not pass a query, uberDB will return the first post in the collection. If you pass a query, it will return first post in the filtered data</p>

<div><pre>
  var db = require('uberdb');
  db.connect('/examples/db', ['posts']);
  db.posts.findOne({_id: '0f6047c6c69149f0be0c8f5943be91be'});
</pre></div>

<h3>
<a id="update-collection" class="anchor" href="#update-collection" aria-hidden="true"><span class="octicon octicon-link"></span></a>
<a name="update-collection" href="#update-collection"></a>Update Collection</h3>

<div><pre>
  db.collectioName.update(query, data, options);
</pre></div>

<p>You can also update one or many objects in the collection</p>

<div><pre>
  options = {
    multi: false, // update multiple - default false
    upsert: false // if object is not found, add it (update-insert) - default false
  }
</pre></div>

<p>Usage </p>

<div><pre>
  var db = require('uberdb');
  db.connect('/examples/db', ['posts']);

  var query = {
    title : 'Hello uberDB'
  };

  var dataToBeUpdate = {
    title : 'Hello uberDB again!',
  };

  var options = {
     multi: false,
     upsert: false
  };

  var updated = db.posts.update(query, dataToBeUpdate, options);
  console.log(updated); // { updated: 1, inserted: 0 }
</pre></div>

<h3>
<a id="remove-collection" class="anchor" href="#remove-collection" aria-hidden="true"><span class="octicon octicon-link"></span></a>
<a name="remove-collection" href="#remove-collection"></a>Remove Collection</h3>

<div><pre>
  db.collectioName.remove(query, multi);
</pre></div>

<p>You can remove the entire collection (including the file) or you can remove the matched objects by passing in a query. When you pass a query, you can either delete all the matched objects or only the first one by passing <code>multi</code> as <code>false</code>. The default value of <code>multi</code> is <code>true</code>.</p>

<div><pre>
  var db = require('uberdb');
  db.connect('/examples/db', ['posts']);
  db.posts.remove({rating : "5 stars"});
</pre></div>

<div><pre>
  var db = require('uberdb');
  db.connect('/examples/db', ['posts']);
  db.posts.remove({rating : "5 stars"}, true); // remove all matched. Default - multi = true
</pre></div>

<div><pre>
  var db = require('uberdb');
  db.connect('/examples/db', ['posts']);
  db.posts.remove({rating : "5 stars"}, false); // remove only the first match
</pre></div>

<p>Using remove without any params will delete the file and will remove the db instance.</p>

<div><pre>
  var db = require('uberdb');
  db.connect('/examples/db', ['posts']);
  db.posts.remove();
</pre></div>

<p>After the above operation <code>db.posts</code> is <code>undefined</code>.</p>

<h3>
<a id="count" class="anchor" href="#count" aria-hidden="true"><span class="octicon octicon-link"></span></a>
<a name="count" href="#count"></a>Count</h3>

<div><pre>
  db.collectioName.count();
</pre></div>

<p>Will return the count of objects in the Collection</p>

<div><pre>
  var db = require('uberdb');
  db.connect('/examples/db', ['posts']);
  db.posts.count(); // will give the count
</pre></div>

<h2>
<a id="examples" class="anchor" href="#examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>
<a name="examples" href="#examples"></a>Examples</h2>

<p>Refer to the <a href="https://github.com/freekrai/uberdb/tree/master/examples">examples</a> folder.</p>
        </section>

        <footer>
          Uberdb is maintained by <a href="https://github.com/freekrai">freekrai</a><br>
          <p>Copyright (c) 2015 Roger Stringer. Licensed under the MIT license.</p>
          This page was generated by <a href="https://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>
